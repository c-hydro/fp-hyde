

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Applications &mdash; hyde 1.9.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Executables" href="executables.html" />
    <link rel="prev" title="Overview" href="intro.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> hyde
          

          
          </a>

          
            
            
              <div class="version">
                1.9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Applications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#ground-network-applications">Ground Network Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="#satellite-applications">Satellite Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#h-saf">H-SAF</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modis">MODIS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#numerical-weather-prediction-applications">Numerical Weather Prediction Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#deterministic-mode">Deterministic mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#probabilistic-mode-rainfarm-model">Probabilistic mode - Rainfarm model</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="executables.html">Executables</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="annex_a.html">Annex A - Hydrological Model Continuum</a></li>
<li class="toctree-l1"><a class="reference internal" href="annex_b.html">Annex B - Rainfarm</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">hyde</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Applications</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/applications.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="applications">
<h1>Applications<a class="headerlink" href="#applications" title="Permalink to this headline">¶</a></h1>
<p>In this section, applications for different data type are presented; each of them prepare data to suit the conventions used in HyDE package and in FloodPROOFS modelling system too.
Once data are collected from different sources, they are available in a raw format and it is necessary to adapt them, for example changing format, resolutions and domain, to the outcome conventions.
All applications are stored in the apps folder in the root of the package; an example of apps tree is reported:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>hyde-master
├── **apps**
│   ├── ground_network
│   │   ├── rs
│   │   └── ws
│   ├── nwp
│   │   ├── gfs
│   │   ├── lami
│   │   └── wrf
│   ├── rfarm
│   │   ├── lami
│   │   └── wrf
│   ├── satellite
│   ├── utils
│   └── ...
├── bin
├── docs
├── src
│   ├── common
│   └── hyde
├── test
├── AUTHORS.rst
├── CHANGELOG.rst
├── LICENSE.rst
└── README.rst
</pre></div>
</div>
<div class="section" id="ground-network-applications">
<h2>Ground Network Applications<a class="headerlink" href="#ground-network-applications" title="Permalink to this headline">¶</a></h2>
<p>The procedure of <strong>weather stations</strong> data, available in HyDE package is divided in two parts:</p>
<ol class="arabic simple">
<li>extraction of weather stations datasets, both for all requested variables and every time step, from an local or worlwide database (using queries or functions developed specifically for that database) and storage of all variables data in a CSV file for each variable and for every timestep;</li>
<li>conversion of stations data, available in the CSV files created previously, in a spatial information over the selected domain (using, for instance, interpolation, regridding or warping methods) and saving all variables in a netcdf4 file for every timestep.</li>
</ol>
<p>As previously said, the first step of procedure is about the downloading/getting data from a database or data repository. The extraction of weather stations data is performed by an python3 application available in HyDE package in “/hyde-master/bin/downloader/ws/” named “hyde_downloader_{database_name}_ws.py”; for configuring this procedure, a JSON file usually named “hyde_downloader_{database}_ws.json” has to be filled in all of its part. The name of used database has to be specified by the users according with their settings.
At the end, a output CSV file will be created with all data for each variable and for every timestep.</p>
<p>General use of the weather stations downloader is reported below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;&gt; python3 hyde_downloader_ws.py -settings_file hyde_configuration_ws.json<span class="s2">&quot;</span>
</pre></div>
</div>
<p>In the next example, the settings of downloading procedure for rain data is reported. Users can activate downloading of selected variable using attribute “download” equal to “true”. The units of the variable can be specified in order to save this information in the CSV file.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;rain&quot;: {
    &quot;download&quot;: true,
    &quot;name&quot;: &quot;Rain&quot;,
    &quot;sensor&quot;: &quot;Raingauge&quot;,
    &quot;units&quot;: &quot;mm&quot;
},
</pre></div>
</div>
<p>According with the period of simulation or analysis, the time fields have to be updated. Frequency and expected data period have to be set by the users.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;time_info&quot;: {
    &quot;time_get&quot;: &quot;201809010500&quot;,
    &quot;time_period&quot;: 6,
    &quot;time_frequency&quot;: &quot;H&quot;
},
</pre></div>
</div>
<p>Once source data are configured, the weather stations data will be save in a CSV file.</p>
<p>The second step of procedure concerns the spatialization of weather stations data. Spatial datasets of weather stations data are realized using an python3 application available in HyDE package in “/hyde-master/apps/ground_network/ws/” named “HYDE_DynamicData_GroudNetwork_WS.py”; for configuring this procedure, a JSON file usually named “hyde_configuration_groundnetwork_ws.json” has to be filled in all of its part.  Starting from CSV file previously created, the script will able to save an netCDF4 output file will be created with all variables data for every timestep.</p>
<p>General use of the weather stations application is reported below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;&gt; python3 HYDE_DynamicData_GroundNetwork_WS.py -settings_file hyde_configuration_groundnetwork_ws.json -time <span class="s2">&quot;%Y-%m-%d %H:%M&quot;</span>
</pre></div>
</div>
<p>For example, if the application is set to 2016-03-13 22:00:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;&gt; python3 HYDE_DynamicData_GroundNetwork_WS.py -settings_file hyde_configuration_groundnetwork_ws.json -time <span class="s2">&quot;2016-03-13 22:00&quot;</span>
</pre></div>
</div>
<div class="figure align-center" id="id1">
<a class="reference internal image-reference" href="_images/ws_list_variables.png"><img alt="example of list of variables in weather stations output file." src="_images/ws_list_variables.png" style="width: 600.0px; height: 250.0px;" /></a>
<p class="caption"><span class="caption-text">Example of variable list for an weather stations output file.</span></p>
</div>
<p>For example to set the time information, users have to change a time fields according with their simulation settings:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;time&quot;: {
    &quot;time_forecast_step&quot;: 0,
    &quot;time_forecast_delta&quot;: 0,
    &quot;time_observed_step&quot;: 10,
    &quot;time_observed_delta&quot;: 3600,
    &quot;time_reference_type&quot;: {
        &quot;units&quot;: null,
        &quot;rounding&quot;: null,
        &quot;steps&quot;: null
    }
}
</pre></div>
</div>
<p>All the input variables needed for performing simulation have to be set in dynamic source and outcome fields available in the JSON configuration file.
In the next example, rain configurarion options are reported. Users can change, for instance, the interpolation method (for example “nearest”) and interpolation radius influence along x and y. If some variables are not available to avoid warnings and faults, users can be set “var_mode” to “false” in order to save time and skip uncessary elaborations.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;outcome&quot;: {
    &quot;rain_data&quot;:{
        &quot;id&quot;: {
            &quot;var_type&quot;: [&quot;var2d&quot;, &quot;interpolated&quot;],
            &quot;var_mode&quot;: true,
            &quot;var_name&quot;: [&quot;Rain&quot;],
            &quot;var_file&quot;: &quot;ws_product&quot;,
            &quot;var_colormap&quot;: &quot;rain_colormap&quot;,
            &quot;var_method_save&quot;: &quot;write2DVar&quot;
        },
        &quot;attributes&quot;: {
            &quot;long_name&quot;: &quot;Rain&quot;,
            &quot;standard_name&quot;: &quot;rain&quot;,
            &quot;_FillValue&quot;: -9999.0,
            &quot;ScaleFactor&quot;: 1,
            &quot;units&quot;: &quot;mm&quot;,
            &quot;Valid_range&quot;: [0, null],
            &quot;description&quot;: &quot;&quot;
        }
    },
}
</pre></div>
</div>
<p>Once source data are configured, outcome data need to be configureted too. Users, for example, can be set units, scale factor and valid range to properly filter weather stations data and define a spatial information that will be saved in a netCDF4 output file.</p>
<div class="figure align-center" id="id2">
<a class="reference internal image-reference" href="_images/ws_rain_map.png"><img alt="example of rain map." src="_images/ws_rain_map.png" style="width: 450.0px; height: 250.0px;" /></a>
<p class="caption"><span class="caption-text">Example of rain map for Marche Italian region.</span></p>
</div>
<div class="figure align-center" id="id3">
<a class="reference internal image-reference" href="_images/ws_airtemperature_map2.png"><img alt="example of air temperature map." src="_images/ws_airtemperature_map2.png" style="width: 450.0px; height: 250.0px;" /></a>
<p class="caption"><span class="caption-text">Example of air temperature map for Marche Italian region.</span></p>
</div>
</div>
<div class="section" id="satellite-applications">
<h2>Satellite Applications<a class="headerlink" href="#satellite-applications" title="Permalink to this headline">¶</a></h2>
<div class="section" id="h-saf">
<h3>H-SAF<a class="headerlink" href="#h-saf" title="Permalink to this headline">¶</a></h3>
<p>The <strong>“EUMETSAT Satellite Application Facility on Support to Operational Hydrology and Water Management (H-SAF)”</strong> started on 2005 as part of the <a class="reference external" href="https://www.eumetsat.int/website/home/Satellites/GroundSegment/Safs/index.html">EUMETSAT SAF Networks</a>.
The H-SAF generates and archives high-quality data sets and products for operational hydrological applications starting from the acquisition and processing of data from Earth observation satellites in geostationary and polar orbits operated both by EUMETSAT and other satellite organization. The retrieval of products uses data from microwave and infrared instruments and aims at reaching the best possible accuracy compatible with satellite systems as available today or in the near future. H-SAF applications fit with the objectives of other European and international programmes with special relevance to those initiatives which want to mitigate hazards and natural disasters such as flash floods, forest fires, landslides and drought conditions, and improve water management. All the information about the project and the product are available on <a class="reference external" href="http://hsaf.meteoam.it/">HSAF WebSite</a>.</p>
<dl class="docutils">
<dt>In H-SAF project the products are divided in three categories:</dt>
<dd><ul class="first last simple">
<li><strong>precipitation</strong> (liquid, solid, rate, accumulated;</li>
<li><strong>soil moisture</strong> (at large-scale, at local-scale, at surface, in the roots region);</li>
<li><strong>snow parameters</strong> (detection, cover, melting conditions, water equivalent).</li>
</ul>
</dd>
<dt>In HyDE python package, the following applications are available to perform analysis over these products:</dt>
<dd><ul class="first last simple">
<li>precipitation –&gt; <strong>H03b</strong>, <strong>H05b</strong>;</li>
<li>soil moisture –&gt; <strong>H14</strong>, <strong>H16</strong>, <strong>H101</strong>;</li>
<li>snow parameters –&gt; <strong>H10</strong>, <strong>H12</strong>, <strong>H13</strong>.</li>
</ul>
</dd>
</dl>
<p>The procedures of H-SAF consist in some applications written in python3 available in HyDE package in “/hyde-master/apps/satellite/HSAF/”.</p>
<p>The <strong>product H03B</strong> is based on the IR images from the SEVIRI instrument on-board Meteosat Second Generation (MSG) satellites. The spatial coverage of the product included the H-SAF area (Europe and Mediterranean basin) and the Africa and Southern Atlantic Ocean. Thus the new geographic region covers the MSG area correspondent to 60°S – 67.5°N, 80°W – 80°E.</p>
<div class="figure align-center" id="id4">
<a class="reference internal image-reference" href="_images/satellite_h03b_map.png"><img alt="example of h03b istantaneous rain map." src="_images/satellite_h03b_map.png" style="width: 700px; height: 600px;" /></a>
<p class="caption"><span class="caption-text">Example of h03b istantaneous rain map for Europe domain.</span></p>
</div>
<p>The product is generated at the 15-min imaging rate of SEVIRI, and the spatial resolution is consistent with the SEVIRI pixel. The precipitation estimates are obtained by combining IR GEO equivalent blackbody temperatures at 10.8 μm with rain rates from PMW measurements. The units of H03b istantaneous rain product are expressed in [mm/h].</p>
<p>General use of the <strong>H03B application</strong> is reported below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;&gt; python3 HYDE_DynamicData_HSAF_H03B.py -settings_file configuration.json -time <span class="s2">&quot;%Y-%m-%d %H:%M&quot;</span>
</pre></div>
</div>
<p>The <strong>h05b product</strong> is derived from precipitation maps generated by merging MW images from operational sun-synchronous satellites and IR images from geostationary satellites. Integration is performed over 3, 6, 12 and 24 hours.</p>
<div class="figure align-center" id="id5">
<a class="reference internal image-reference" href="_images/satellite_h05b_map.png"><img alt="example of h05b accumulated rain map." src="_images/satellite_h05b_map.png" style="width: 700px; height: 600px;" /></a>
<p class="caption"><span class="caption-text">Example of h05b accumulated rain map for Europe domain.</span></p>
</div>
<p>In order to reduce biases, the satellite-derived field is forced to match raingauge observations and, in future, the accumulated precipitation field outputted from a NWP model. The units of H05b accumulated rain product are expressed in [mm].</p>
<p>General use of the <strong>H05B application</strong> is reported below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;&gt; python3 HYDE_DynamicData_HSAF_H05B.py -settings_file configuration.json -time <span class="s2">&quot;%Y-%m-%d %H:%M&quot;</span>
</pre></div>
</div>
<p>The <strong>H10 product</strong> is an output of image classification processing. The snow signature is recognised as differential brightness in more short-wave channels, intended to discriminate snow from no-snowed land and snow from clouds.</p>
<div class="figure align-center" id="id6">
<a class="reference internal image-reference" href="_images/satellite_h10_map.png"><img alt="example of h10 snow cover map." src="_images/satellite_h10_map.png" style="width: 700px; height: 600px;" /></a>
<p class="caption"><span class="caption-text">Example of h10 snow cover map for Italy domain, where 1:snow, 2:cloud, 3:bare ground, 4:water, 5:dark/no_data.</span></p>
</div>
<p>Both radiometric signatures are used (specifically, the 1.6 micron channel as compared with others), and time-persistency (for cloud filtering by the “minimum brightness” technique applied over a sequence of images).</p>
<p>General use of the <strong>H10 application</strong> is reported below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;&gt; python3 HYDE_DynamicData_HSAF_H10.py -settings_file configuration.json -time <span class="s2">&quot;%Y-%m-%d %H:%M&quot;</span>
</pre></div>
</div>
<p>The <strong>H12 product</strong> differs from H10 in so far as, in the snow map, the resolution elements report the fractional snow coverage instead of being binary (snow/snow-free). The possibility of appreciating fractional coverage stems from the lack of observed brightness in respect of what would be if the pixel were fully filled by snow..</p>
<div class="figure align-center" id="id7">
<a class="reference internal image-reference" href="_images/satellite_h12_map.png"><img alt="example of h12 snow cover map." src="_images/satellite_h12_map.png" style="width: 700px; height: 600px;" /></a>
<p class="caption"><span class="caption-text">Example of h12 snow cover map for Italy domain, where 0:bare ground, 1-100:fractional cover -1:no_classified/no_data, -2:cloud, -3:water.</span></p>
</div>
<p>The forest canopy obscuring the full visibility to the ground is accounted for by applying certain a priori transmissivity information, which must be generated using satellite-borne reflectance data acquired under full dry snow cover conditions</p>
<p>General use of the <strong>H12 application</strong> is reported below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;&gt; python3 HYDE_DynamicData_HSAF_H12.py -settings_file configuration.json -time <span class="s2">&quot;%Y-%m-%d %H:%M&quot;</span>
</pre></div>
</div>
<p>The <strong>H13 product</strong> is generated by using microwaves that are sensitive to snow thickness and density, i.e. to the snow water equivalent. Depending on the snow being dry or wet, the penetration changes (dry snow is more transparent). High frequencies are required for dry snow, which is an advantage from the resolution viewpoint.</p>
<div class="figure align-center" id="id8">
<a class="reference internal image-reference" href="_images/satellite_h13_map.png"><img alt="example of h13 snow water equivalent map." src="_images/satellite_h13_map.png" style="width: 700px; height: 600px;" /></a>
<p class="caption"><span class="caption-text">Example of h13 snow water equivalent map for Italy domain, where 0:bare ground, 1-500:snow water equivalent, -1:no_classified/no_data</span></p>
</div>
<p>However, with increasing snow depth, lower frequencies are necessary for better penetration, thus a multifrequency approach is required. It is an all-weather, night-and-day measurement, whose processing requires considerable support from ancillary information. Method and performance may be different for flat/forested areas and mountainous regions.</p>
<p>General use of the <strong>H13 application</strong> is reported below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;&gt; python3 HYDE_DynamicData_HSAF_H13.py -settings_file configuration.json -time <span class="s2">&quot;%Y-%m-%d %H:%M&quot;</span>
</pre></div>
</div>
<p>The Level 2 surface soil moisture products <strong>H16</strong> and <strong>H101</strong> are derived from the radar backscattering coefficients measured by the Advanced Scatterometer (ASCAT) on-board the series of Metop satellites using a change detection method, developed at the Research Group Remote Sensing, Department for Geodesy and Geoinformation (GEO), Vienna University of Technology (TU Wien).</p>
<div class="figure align-center" id="id9">
<a class="reference internal image-reference" href="_images/satellite_sm_obs_swit6_map.png"><img alt="example of ASCAT H16/H101 soil water index map." src="_images/satellite_sm_obs_swit6_map.png" style="width: 700px; height: 600px;" /></a>
<p class="caption"><span class="caption-text">Example of ASCAT H16/H101 soil water index (SWI) map, based on surface soil moisture (SSM) time-series.</span></p>
</div>
<p>In the TU Wien soil moisture retrieval algorithm, long-term Scatterometer data are used to model the incidence angle dependency of the radar backscattering signal. Knowing the incidence angle dependency, the backscattering coefficients are normalized to a reference incidence angle. Finally, the relative soil moisture data ranging between 0% and 100% are derived by scaling the normalized backscattering coefficients between the lowest/highest values corresponding to the driest/wettest soil conditions. Once SSM values are obtained, next step is how to extend the influnce of SSM at the different soil deepths. Starting from the SSM values, the Soil Water Index (SWI) is a method to estimate root zone soil moisture using an exponential Filter.</p>
<p>The <strong>ASCAT OBS applications</strong>, based on <strong>H16</strong> and <strong>H101</strong> products, are developt in order to compute the time-series of SSM and SWI both for the <strong>data record</strong> (DR) and the <strong>near-real-time</strong> (NRT) datasets.</p>
<p>General use of ASCAT OBS application for computing data record dataset is reported below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;&gt; python3 HYDE_DynamicData_HSAF_ASCAT_OBS_DR.py -settingfile configuration_product.json
</pre></div>
</div>
<p>For computing the near-real-time datasets, the genearal command-line is as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;&gt; python3 HYDE_DynamicData_HSAF_ASCAT_OBS_NRT.py -settingfile configuration_product.json -time <span class="s2">&quot;%Y-%m-%d %H:%M&quot;</span>
</pre></div>
</div>
<p>The <strong>product H14</strong> is generated by the soil moisture assimilation system, using the surface observation from ASCAT that is propagated towards the roots region down to 2.89 m below surface, providing estimates for 4 layers (thicknesses 0.07, 0.21, 0.72 and 1.89 m). The ECMWF model generates soil moisture profile information according to the Hydrology Tiled ECMWF Scheme for Surface Exchanges over Land (HTESSEL). The product is available at a 24-hour time step, with a global daily coverage at 00:00 UTC.</p>
<div class="figure align-center" id="id10">
<a class="reference internal image-reference" href="_images/satellite_rzsm_mod_var40_map.png"><img alt="example of ASCAT H14 root zone soil moisture map." src="_images/satellite_rzsm_mod_var40_map.png" style="width: 700px; height: 600px;" /></a>
<p class="caption"><span class="caption-text">Example of ASCAT H14 root zone soil moisture 0 - 7 cm.</span></p>
</div>
<p>The product H14 is produced in a continuous way in order to ensure the time series consistency of the product (and also to provide values when there is no satellite data, from the model propagation). The SM-DAS-2 product is the first global product of consistent surface and root zone soil moisture available NRT for the NWP, climate and hydrological communities.</p>
<p>The <strong>ASCAT MOD applications</strong>, based on <strong>H14</strong> product, are developt in order to compute the time-series of SSM and SWI both for the <strong>data record</strong> (DR) and the <strong>near-real-time</strong> (NRT) datasets.</p>
<p>General use of ASCAT MOD application for computing data record dataset is reported below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;&gt; python3 HYDE_DynamicData_HSAF_ASCAT_MOD_DR.py -settingfile configuration_product.json
</pre></div>
</div>
<p>For computing the near-real-time datasets, the genearal command-line is as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;&gt; python3 HYDE_DynamicData_HSAF_ASCAT_MOD_NRT.py -settingfile configuration_product.json -time <span class="s2">&quot;%Y-%m-%d %H:%M&quot;</span>
</pre></div>
</div>
<p>The configuration files for all H-SAF products have to be filled in order to correctly set the algorithms.</p>
</div>
<div class="section" id="modis">
<h3>MODIS<a class="headerlink" href="#modis" title="Permalink to this headline">¶</a></h3>
<p>The MODIS Snow Cover products are generated using the MODIS calibrated radiance data products (MOD02HKM and MYD02HKM), the geolocation products (MOD03 and MYD03), and the cloud mask products (MOD35_L2 and MYD35_L2) as inputs. The MODIS snow algorithm output (MOD10_L2 and MYD10_L2) contains scientific data sets (SDS) of snow cover, quality assurance (QA) SDSs, latitude and longitude SDSs, local attributes and global attributes. The snow cover algorithm identifies snow-covered land; it also identifies snow-covered ice on inland water. Further information are available on <a class="reference external" href="https://modis.gsfc.nasa.gov/data/dataprod/mod10.php">MODIS Snow Cover WebSite</a>.</p>
<p>General use of MODIS Snow Cover application is reported below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;&gt; python3 HYDE_DynamicData_MODIS_Snow.py -settingfile configuration_product.json
</pre></div>
</div>
</div>
</div>
<div class="section" id="numerical-weather-prediction-applications">
<h2>Numerical Weather Prediction Applications<a class="headerlink" href="#numerical-weather-prediction-applications" title="Permalink to this headline">¶</a></h2>
<div class="section" id="deterministic-mode">
<h3>Deterministic mode<a class="headerlink" href="#deterministic-mode" title="Permalink to this headline">¶</a></h3>
<p>The procedure of numerical weather prediction data consists in an application written in python3 available in HyDE package in “/hyde-master/apps/{nwp_name}” named “HYDE_DynamicData_NWP_{nwp_name}.py”; for configuring this procedure, a JSON file usually named “hyde_configuration_nwp_{nwp_name}.json” has to be filled in all of its part.  For example, in case of wrf is used the name of the HyDE application will be updated using “wrf” to complete names of folders, procedures and configuration files.</p>
<p>General use of the nwp application is reported below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;&gt; python3 HYDE_DynamicData_NWP_<span class="o">{</span>nwp_name<span class="o">}</span>.py -settings_file hyde_configuration_nwp_<span class="o">{</span>nwp_name<span class="o">}</span>.json -time <span class="s2">&quot;%Y-%m-%d %H:%M&quot;</span>
</pre></div>
</div>
<p>For example, if the application is about wrf at 2019-05-22 13:00:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;&gt; python3 HYDE_DynamicData_NWP_WRF.py -settings_file hyde_configuration_nwp_wrf.json -time <span class="s2">&quot;2019-05-22 13:00&quot;</span>
</pre></div>
</div>
<div class="figure align-center" id="id11">
<a class="reference internal image-reference" href="_images/nwp_list_variables.png"><img alt="example of list of nwp variables in output file." src="_images/nwp_list_variables.png" style="width: 600px; height: 200px;" /></a>
<p class="caption"><span class="caption-text">Example of variable list for an nwp output file.</span></p>
</div>
<p>In the configuration file, users can change settings of variables and timing information. Time fields have to be changed according with nwp timestep resolution and forecast length.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;time&quot;: {
  &quot;time_forecast_step&quot;: 48,
  &quot;time_forecast_delta&quot;: 3600,
  &quot;time_observed_step&quot;: 0,
  &quot;time_observed_delta&quot;: 0
},
</pre></div>
</div>
<p>About variables and their attributes, users can update name, type and computational methods of each variable. Scale factor, units, missing value and fill value are requested to get and filter values.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;air_temperature_data&quot;: {
  &quot;id&quot;: {
    &quot;var_type&quot;: [&quot;var3d&quot;, &quot;istantaneous&quot;],
    &quot;var_name&quot;: [&quot;T2&quot;],
    &quot;var_file&quot;: &quot;wrf_data&quot;,
    &quot;var_method_get&quot;: &quot;get2DVar&quot;,
    &quot;var_method_compute&quot;: &quot;computeAirTemperature&quot;
    },
  &quot;attributes&quot;: {
    &quot;ScaleFactor&quot;: 1,
    &quot;Missing_value&quot;: -9999.0,
    &quot;_FillValue&quot;: -9999.0
    }
}
</pre></div>
</div>
<p>Output format and features of the variable have to be set too. The users can specify, for instance, units, format and ancillary variables. The function to write data in netCDF4 format can be changed according with data expected by the other applications in forecasting chain.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;air_temperature_data&quot;:{
  &quot;id&quot;: {
    &quot;var_type&quot;: [&quot;var3d&quot;, &quot;istantaneous&quot;],
    &quot;var_name&quot;: &quot;AirTemperature&quot;,
    &quot;var_file&quot;: &quot;wrf_product&quot;,
    &quot;var_colormap&quot;: &quot;air_temperature_colormap&quot;,
    &quot;var_method_save&quot;: &quot;write3DVar&quot;
    },
  &quot;attributes&quot;: {
    &quot;long_name&quot;: &quot;&quot;,
    &quot;standard_name&quot;: &quot;&quot;,
    &quot;ancillary_variables&quot;: [&quot;T2&quot;],
    &quot;units&quot;: &quot;C&quot;,
    &quot;Format&quot;: &quot;f4&quot;,
    &quot;description&quot;: &quot;Temperature at 2m&quot;
    }
}
</pre></div>
</div>
<div class="figure align-center" id="id12">
<a class="reference internal image-reference" href="_images/nwp_rain_map.png"><img alt="example of rain map." src="_images/nwp_rain_map.png" style="width: 250.0px; height: 250.0px;" /></a>
<p class="caption"><span class="caption-text">Example of rain map for Barbados island.</span></p>
</div>
<div class="figure align-center" id="id13">
<a class="reference internal image-reference" href="_images/nwp_airtemperature_map.png"><img alt="example of air temperature map." src="_images/nwp_airtemperature_map.png" style="width: 250.0px; height: 250.0px;" /></a>
<p class="caption"><span class="caption-text">Example of air temperature map for Barbados island.</span></p>
</div>
</div>
<div class="section" id="probabilistic-mode-rainfarm-model">
<h3>Probabilistic mode - Rainfarm model<a class="headerlink" href="#probabilistic-mode-rainfarm-model" title="Permalink to this headline">¶</a></h3>
<p>The procedure of Rainfarm model consists in an application written in python3 available in HyDE package in “/hyde-master/apps/rfarm” named “HYDE_Model_RFarm_{nwp_name}.py”; for configuring this procedure, a JSON file usually named “hyde_configuration_rfarm_{nwp_name}.json” has to be filled in all of its part.  For example, in case of WRF numerical model is used the name of the HyDE application will be updated using “wrf” to complete names of folders, procedures and configuration files.</p>
<p>General use of the nwp application is reported below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;&gt; python3 HYDE_Model_RFarm_<span class="o">{</span>nwp_name<span class="o">}</span>.py -settings_file hyde_configuration_rfarm_<span class="o">{</span>nwp_name<span class="o">}</span>.json -time <span class="s2">&quot;%Y-%m-%d %H:%M&quot;</span>
</pre></div>
</div>
<p>For example, if the application is about wrf at 2019-05-22 13:00:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;&gt; python3 HYDE_Model_RFarm_WRF.py -settings_file hyde_configuration_rfarm_wrf.json -time <span class="s2">&quot;2019-05-22 13:00&quot;</span>
</pre></div>
</div>
<div class="figure align-center" id="id14">
<a class="reference internal image-reference" href="_images/rfarm_list_variables.png"><img alt="example of list of nwp variables in output file." src="_images/rfarm_list_variables.png" style="width: 500px; height: 100px;" /></a>
<p class="caption"><span class="caption-text">Example of variable list for an nwp output file.</span></p>
</div>
<p>Obviously, according with NWP version and features, users have to set the reliable spatial scale of LAM Lo (cs_sf in the configuration file) and the reliable temporal scale of LAM T0 (ct_sf in the configuration file). The number of ensembles have to be set, too.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;parameters&quot;: {
    &quot;ensemble&quot;: {&quot;start&quot;: 1, &quot;end&quot;: 30},
    &quot;ratio_s&quot;: 6,
    &quot;ratio_t&quot;: 1,
    &quot;slope_s&quot;: null,
    &quot;slope_t&quot;: null,
    &quot;cs_sf&quot;: 2,
    &quot;ct_sf&quot;: 2,
    &quot;multi_core&quot;: false,
    &quot;domain_extension&quot;: 0,
    &quot;tmp&quot;: true
}
</pre></div>
</div>
<p>In the configuration file, users can change settings of variables and timing information. Time fields have to be changed according with nwp timestep resolution and forecast length.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;time&quot;: {
    &quot;time_forecast_period&quot;: 48,
    &quot;time_forecast_frequency&quot;: &quot;H&quot;,
    &quot;time_observed_period&quot;: 0,
    &quot;time_observed_frequency&quot;: &quot;H&quot;,
    &quot;time_rounding&quot;: &quot;H&quot;
}
</pre></div>
</div>
<div class="figure align-center" id="id15">
<a class="reference internal image-reference" href="_images/rfarm_rain_map.png"><img alt="example of comparison between nwp and disaggregated maps." src="_images/rfarm_rain_map.png" style="width: 600px; height: 300px;" /></a>
<p class="caption"><span class="caption-text">Example of comparison between nwp map and disaggregated map for Barbados island.</span></p>
</div>
<p>Further details on the Rainfarm model are reported in <a class="reference external" href="annex_b.rst">AnnexB</a>.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="executables.html" class="btn btn-neutral float-right" title="Executables" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="intro.html" class="btn btn-neutral float-left" title="Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Fabio Delogu

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>